"use strict";(self.webpackChunksgpt=self.webpackChunksgpt||[]).push([[8661],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),g=p(n),m=i,c=g["".concat(l,".").concat(m)]||g[m]||u[m]||o;return n?a.createElement(c,r(r({ref:t},d),{},{components:n})):a.createElement(c,r({ref:t},d))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:i,r[1]=s;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4019:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const o={},r=void 0,s={unversionedId:"Pages/Editing photos page/EditingPhotosPageProvider",id:"Pages/Editing photos page/EditingPhotosPageProvider",title:"EditingPhotosPageProvider",description:"EditingPhotosPageContext (Context)",source:"@site/docs/Pages/Editing photos page/EditingPhotosPageProvider.md",sourceDirName:"Pages/Editing photos page",slug:"/Pages/Editing photos page/EditingPhotosPageProvider",permalink:"/Pages/Editing photos page/EditingPhotosPageProvider",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Pages/Editing photos page/EditingPhotosPageProvider.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"EditingPhotosPage",permalink:"/Pages/Editing photos page/EditingPhotosPage"},next:{title:"Layout",permalink:"/Pages/Layout/"}},l={},p=[{value:"EditingPhotosPageContext (Context)",id:"editingphotospagecontext-context",level:3},{value:"EditingPhotosPageProvider (Component)",id:"editingphotospageprovider-component",level:3},{value:"<strong>Data and States</strong>",id:"data-and-states",level:4},{value:"<strong>Methods and Functions</strong>",id:"methods-and-functions",level:4},{value:"Effects",id:"effects",level:3},{value:"Effect for Resetting Generated Items",id:"effect-for-resetting-generated-items",level:3},{value:"Effect for Managing Presets",id:"effect-for-managing-presets",level:3},{value:"Effect for Managing Chosen Listings",id:"effect-for-managing-chosen-listings",level:3},{value:"useEditingPhotosPage()",id:"useeditingphotospage",level:3}],d={toc:p},g="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(g,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"editingphotospagecontext-context"},"EditingPhotosPageContext (Context)"),(0,i.kt)("p",null,"A context used to provide data and functions related to the editing photos page to its child components."),(0,i.kt)("h3",{id:"editingphotospageprovider-component"},"EditingPhotosPageProvider (Component)"),(0,i.kt)("p",null,"A provider component that wraps the EditingPhotosPage component and provides context data and functions related to the\nphoto editing functionality."),(0,i.kt)("h4",{id:"data-and-states"},(0,i.kt)("strong",{parentName:"h4"},"Data and States")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isBasicMode"),": A boolean state that determines whether the page is in basic mode or advanced mode for editing."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"itemForEditing"),": The image or item being edited."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"suggestionItems"),": List of suggested items for editing."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isLoadingChosenListings"),": A boolean state indicating if the chosen listings are being loaded."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"allListingsLoading"),": A boolean state indicating if all listings are being loaded."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"suggestionsAreLoading"),": A boolean state indicating if the suggestion items are being loaded."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isPresetModalOpen"),": A boolean state indicating if the preset modal is open."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"presets"),": List of saved presets."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"presetsIsLoading"),": A boolean state indicating if the presets are being loaded."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"activePreset"),": The currently active preset."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"generatedItemsList"),": List of generated items from editing."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isItemGenerated"),": A boolean state indicating if an item has been successfully generated."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isGeneratingImage"),": A boolean state indicating if an image is being generated."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"progress"),": Progress value of image generation.")),(0,i.kt)("h4",{id:"methods-and-functions"},(0,i.kt)("strong",{parentName:"h4"},"Methods and Functions")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"getImageToShow"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function determines the appropriate URL of the image to be displayed for editing, based on the ",(0,i.kt)("inlineCode",{parentName:"p"},"itemForEditing"),"\nstate and its properties. It handles different cases, including external URLs, media objects, and local file objects."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo provide the URL of the image that should be displayed for editing, considering various scenarios based on\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"itemForEditing")," state."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A URL string that points to the image to be displayed for editing.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleGenerateImage"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function initiates the process of generating an edited image based on the provided filters. It constructs a message\ncontaining filter settings and image URL to be sent for image generation."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo trigger the generation of an edited image using the provided filter settings and image URL."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"filters")," (Object): An object containing filter settings for generating an edited image.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleSavePreset"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function saves or updates a preset with the provided values. It interacts with the ",(0,i.kt)("inlineCode",{parentName:"p"},"EditingImagesAPI")," to perform\nthe save/update operation and updates related state variables."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo save or update a preset with the provided values, interacting with the API and managing state accordingly."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"presetValues")," (Object): An object containing values/settings for a preset.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleClickEditPreset"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function prepares the preset editing modal by updating the state with the preset to be edited and opening the\nmodal."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo set up the preset editing modal and open it for a specific preset."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"preset")," (Object): The preset object that needs to be edited.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleResetGeneratedItem"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function resets states related to generated items, specifically setting ",(0,i.kt)("inlineCode",{parentName:"p"},"isItemGenerated")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," and clearing\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"generatedItemsList"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo reset state variables related to generated items, ensuring a clean state for the next operation."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleUndoClick"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function handles the action of undoing changes, specifically by setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"itemForEditing")," state to ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," and\nclearing generated items."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo undo changes made during editing, reverting to the original state."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleUploadItemForEditing"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function handles the process of uploading an image for editing. It validates the uploaded file, saves it, and\nupdates relevant state variables."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo upload an image for editing, ensuring validity, and updating state."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"e")," (Event): The file input change event triggering the upload action.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleChoosePreset"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function handles the selection of a preset by updating the ",(0,i.kt)("inlineCode",{parentName:"p"},"activePreset")," state and switching the mode to advanced."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo choose a preset, updating state variables and adjusting the user interface."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"preset")," (Object): The preset object that has been selected.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"handleDownloadImage"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis function initiates the download of the edited image, retrieving the appropriate URL and triggering the download\nprocess."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo enable the user to download the edited image."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Props:"),"\nNone"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Return Value:"),"\nNone"),(0,i.kt)("p",null,"Each of these functions plays a crucial role in the overall functionality of the ",(0,i.kt)("inlineCode",{parentName:"p"},"EditingPhotosPage")," component. They\nhandle various aspects of image editing, preset management, and user interactions, ensuring a smooth and intuitive user\nexperience."),(0,i.kt)("h3",{id:"effects"},"Effects"),(0,i.kt)("h3",{id:"effect-for-resetting-generated-items"},"Effect for Resetting Generated Items"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis effect is triggered whenever the ",(0,i.kt)("inlineCode",{parentName:"p"},"itemForEditing")," state changes. If there is no image for editing (",(0,i.kt)("inlineCode",{parentName:"p"},"itemForEditing"),"\nis falsy), it resets the states related to generated items, specifically setting ",(0,i.kt)("inlineCode",{parentName:"p"},"isItemGenerated")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," and\nclearing the ",(0,i.kt)("inlineCode",{parentName:"p"},"generatedItemsList"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo ensure that when the image for editing changes, any previous generated items and related state variables are reset to\ntheir initial values."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Dependencies:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"itemForEditing"),": The image being edited."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setIsItemGenerated"),": A function to update the ",(0,i.kt)("inlineCode",{parentName:"li"},"isItemGenerated")," state."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setGeneratedItemsList"),": A function to clear the ",(0,i.kt)("inlineCode",{parentName:"li"},"generatedItemsList")," state.")),(0,i.kt)("h3",{id:"effect-for-managing-presets"},"Effect for Managing Presets"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis effect is responsible for fetching and managing presets for image editing. It first checks if there are no existing\npresets, and if so, it retrieves them using the ",(0,i.kt)("inlineCode",{parentName:"p"},"EditingImagesAPI.getPresets")," function. It also listens for changes to\nthe presets in the Firebase Realtime Database and updates the state variables accordingly."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo fetch and manage presets for image editing, updating state variables based on the retrieved data and database\nchanges."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Dependencies:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UID"),": The user's unique identifier."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setPresets"),": A function to update the ",(0,i.kt)("inlineCode",{parentName:"li"},"presets")," state."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setPresetsIsLoading"),": A function to update the ",(0,i.kt)("inlineCode",{parentName:"li"},"presetsIsLoading")," state."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"presets"),": The array of existing presets."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"EditingImagesAPI.getPresets"),": A function to fetch presets from the API."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ref"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"onValue"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"off"),": Firebase Realtime Database functions for listening to data changes.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Cleanup:"),"\nThe effect returns a cleanup function that removes the listener for database changes."),(0,i.kt)("h3",{id:"effect-for-managing-chosen-listings"},"Effect for Managing Chosen Listings"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Functionality:"),"\nThis effect handles the retrieval and management of chosen listings for image editing suggestions. It fetches chosen\nlistings using ",(0,i.kt)("inlineCode",{parentName:"p"},"CreationAPI.getChosenListings"),", and if there are not enough chosen listings, it supplements the\nsuggestions with additional listings from the user's available listings. The suggestions are then updated in the state."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Purpose:"),"\nTo fetch and manage chosen listings for image editing suggestions, providing a mix of chosen and additional listings."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Dependencies:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"UID"),": The user's unique identifier."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setIsLoadingChosenListings"),": A function to update the ",(0,i.kt)("inlineCode",{parentName:"li"},"isLoadingChosenListings")," state."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setSuggestionItems"),": A function to update the ",(0,i.kt)("inlineCode",{parentName:"li"},"suggestionItems")," state."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chosenListings"),": The array of chosen listings."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"suggestionsCountForShowing"),": The count of suggestions to display."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getAllListings"),": A function to fetch all available listings."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CreationAPI.getChosenListings"),": A function to fetch chosen listings.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Cleanup:"),"\nNone"),(0,i.kt)("p",null,"These three ",(0,i.kt)("inlineCode",{parentName:"p"},"useEffect")," hooks work together to manage various aspects of the image editing page. They ensure that\ngenerated items are reset when the editing image changes, manage the presets available for editing, and fetch and manage\nchosen listings to provide suggestions for image editing."),(0,i.kt)("h3",{id:"useeditingphotospage"},"useEditingPhotosPage()"),(0,i.kt)("p",null,"A custom hook that allows components to access the context data and functions related to the editing photos page. It\nshould be used within a component wrapped by ",(0,i.kt)("inlineCode",{parentName:"p"},"EditingPhotosPageProvider"),"."),(0,i.kt)("p",null,"This component and context combination facilitates photo editing, saving presets, and handling various image\nmanipulation functionalities. Data is sourced from Firebase Realtime Database and other services for editing and\ngenerating images. States are managed to track the editing process and provide suggestions."))}u.isMDXComponent=!0}}]);